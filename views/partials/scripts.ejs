<!-- Toast Container -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 11000;">
    <div id="authToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <i class="fas fa-heartbeat text-danger me-2"></i>
            <strong class="me-auto">EMResource</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastMessage">
            <!-- Toast message will be inserted here -->
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Authentication JS -->
<script src="/js/auth.js"></script>

<script>
// Logout function
function logout() {
    fetch('/auth/logout', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            window.location.href = '/';
        }
    })
    .catch(error => {
        console.error('Logout error:', error);
    });
}

// User data for React components
<% if (user) { %>
window.currentUser = {
    id: '<%= user._id %>',
    name: '<%= user.name %>',
    email: '<%= user.email %>',
    isEmailVerified: <%= user.isEmailVerified %>,
    picture: '<%= user.picture || "" %>',
    authMethod: '<%= user.authMethod %>'
};
<% } else { %>
window.currentUser = null;
<% } %>
</script>